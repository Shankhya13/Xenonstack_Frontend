<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <header>
      <h1>Mobile Selling Platform</h1>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="#">About</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </nav>
      <div id="user-info">
        <a href="login.html"> <button id="login-button">Log In</button></a>
        <a href="signup.html"><button id="signup-button">Sign In</button></a>
        <a href="login.html"
          ><button
            id="logout-button"
            onclick="signout(function redirect(){window.location.href='login.html'})"
          >
            Log Out
          </button></a
        >
      </div>
    </header>

    <script defer type="text/javaScript" src="./script/action.js"></script>
    <script>
      // Get the login and logout buttons
      const loginButton = document.getElementById("login-button");
      const signupButton = document.getElementById("signup-button");
      const logoutButton = document.getElementById("logout-button");

      // logoutButton.addEventListener("click", () => {
      // 	// TODO: Implement the logout functionality
      // 	window.location.href = "/login.html";
      // 	// alert("You have logged out!");
      // 	// logoutButton.style.display = "none";
      // 	// loginButton.style.display = "inline";
      // });

      loginButton.addEventListener("load", isAuthenticate());

      function isAuth() {
        if (typeof window != "undefined") {
          const tokenChecked = window.localStorage.getItem("token");
          console.log("token");
          if (tokenChecked) {
            if (localStorage.getItem("user")) {
              return JSON.parse(localStorage.getItem("user"));
            } else {
              return false;
            }
          }
        }
      }

      function isAuthenticate() {
        console.log("Auth");
        if (isAuth()) {
          signupButton.style.display = "none";
          loginButton.style.display = "none";
          logoutButton.style.display = "inline";
        } else {
          signupButton.style.display = "inline";
          loginButton.style.display = "inline";
          logoutButton.style.display = "none";
        }
      }
    </script>
  </body>
</html>
